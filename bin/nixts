#!/usr/bin/env python3
# This file is placed in the Public Domain.
# pylint: disable=C0413


"service"


import getpass
import sys
import time


from nixt.config  import Config
from nixt.errors  import Errors, errors
from nixt.main    import enable, init, wrap
from nixt.modules import face
from nixt.user    import iface
from nixt.utils   import banner, forever, modnames, pidfile, privileges


Cfg = Config()
Cfg.mod = ",".join(modnames(face, iface))
Cfg.user = getpass.getuser()


def main():
    "main"
    banner(Cfg, print)
    privileges(Cfg.user)
    pidfile(Cfg.pidfile)
    init(Cfg.mod, face, iface)
    forever()


if __name__ == "__main__":
    Errors.out = print
    wrap(main)
    errors()